module.exports = welcome = async (kxd, anu) => {const { MessageType } = require("@adiwajshing/baileys");const fs = require("fs-extra")const { color, bgcolor } = require('../lib/color')const { getBuffer } = require('../lib/myfunc')const moment = require("moment-timezone")const welkom = JSON.parse(fs.readFileSync('./database/group/welcome.json'))const a = '```'const time_wel = moment.tz('Asia/Jakarta').format("HH:mm")const mdata = await kxd.groupMetadata(anu.jid)const groupName = mdata.subjectconst memeg = mdata.participants.lengthif (!welkom.includes(anu.jid)) returntry {console.log(anu)if (anu.action == 'add') {num = anu.participants[0]try {ppimg = await kxd.getProfilePicture(`${anu.participants[0].split('@')[0]}@c.us`)} catch {ppimg = 'https://i0.wp.com/www.gambarunik.id/wp-content/uploads/2019/06/Top-Gambar-Foto-Profil-Kosong-Lucu-Tergokil-.jpg'}teks = `*Hai @${num.split('@')[0]} Selamat Datang Di ${mdata.subject}*\n*Jangan jadi kutu loncat sayang!*`let buffer = await getBuffer(`http://hadi-api.herokuapp.com/api/card/welcome?nama=${num.split('@')[0]}&descriminator=${time_wel}&memcount=${memeg}&gcname=${groupName}&pp=${ppimg}&bg=https://i.ibb.co/pWNMwpw/a8a54768b6bf.jpg`)kxd.sendMessage(mdata.id, buffer, MessageType.image, { caption: teks, contextInfo: { "mentionedJid": [num] } })} else if (anu.action == 'remove') {num = anu.participants[0]try {ppimg = await kxd.getProfilePicture(`${num.split('@')[0]}@c.us`)} catch {ppimg = 'https://i0.wp.com/www.gambarunik.id/wp-content/uploads/2019/06/Top-Gambar-Foto-Profil-Kosong-Lucu-Tergokil-.jpg'}teks = `Selamat Tinggal @${num.split('@')[0]}ðŸ‘‹*${a}Jasamu akan saya kubur dalam dalam${a}`let buffer = await getBuffer(`http://hadi-api.herokuapp.com/api/card/goodbye?nama=${num.split('@')[0]}&descriminator=${time_wel}&memcount=${memeg}&gcname=${groupName}&pp=${ppimg}&bg=https://i.ibb.co/pWNMwpw/a8a54768b6bf.jpg`)kxd.sendMessage(mdata.id, buffer, MessageType.image, { caption: teks, contextInfo: { "mentionedJid": [num] } })}} catch (e) {console.log('Error : %s', color(e, 'red'))}}