const { MessageType } = require("@adiwajshing/baileys");const fs = require("fs-extra")const { getBuffer } = require('../lib/myfunc')const { color, bgcolor } = require('../lib/color')module.exports = welcome = async (kxd, anu) => {	    const welkom = JSON.parse(fs.readFileSync('./database/group/welcome.json'))	    const isWelcome = welkom.includes(anu.jid)        const mdata = await kxd.groupMetadata(anu.jid)        const memeg = mdata.participants.length	    if (!isWelcome) return		try {			const mdata = await kxd.groupMetadata(anu.jid)			console.log(anu)			if (anu.action == 'add') {				num = anu.participants[0]				try {					ppimg = await kxd.getProfilePicture(`${anu.participants[0].split('@')[0]}@c.us`)				} catch {					ppimg = 'https://i0.wp.com/www.gambarunik.id/wp-content/uploads/2019/06/Top-Gambar-Foto-Profil-Kosong-Lucu-Tergokil-.jpg'				} 				let buff = await getBuffer(`http://hadi-api.herokuapp.com/api/card/welcome?nama=${num.split('@')[0]}&descriminator=${memeg}&memcount=${memeg}&gcname=${mdata.subject}&pp=${ppimg}&bg=https://telegra.ph/file/482d5623106684ceea556.jpg`)				buttons = [                { buttonId: `!selamatdatang`, buttonText: { displayText: "Welcome Kak" }, type: 1 },]                imageMsg = (                await kxd.prepareMessageMedia(buff, "imageMessage", {                thumbnail: buff,               })            ).imageMessage;          buttonsMessage = {          contentText: `*Hi Kak* *@${num.split('@')[0]}*\n*Welcome in group ${mdata.subject}*\n*Semoga betah~~*`,          footerText: "_Welcome Message By KunzxD_",          contextInfo: {"mentionedJid": [num]},           imageMessage: imageMsg,          buttons: buttons,          headerType: 4,        }        prep = await kxd.prepareMessageFromContent(          mdata.id,          { buttonsMessage },          {}        )        kxd.relayWAMessage(prep)     				             				} else if (anu.action == 'remove') {				num = anu.participants[0]				try {					ppimg = await kxd.getProfilePicture(`${num.split('@')[0]}@c.us`)				} catch {					ppimg = 'https://i0.wp.com/www.gambarunik.id/wp-content/uploads/2019/06/Top-Gambar-Foto-Profil-Kosong-Lucu-Tergokil-.jpg'				}				let buff = await getBuffer(`http://hadi-api.herokuapp.com/api/card/goodbye?nama=${num.split('@')[0]}&descriminator=${memeg}&memcount=${memeg}&gcname=${mdata.subject}&pp=${ppimg}&bg=https://telegra.ph/file/482d5623106684ceea556.jpg`)				buttons = [                { buttonId: `!bay`, buttonText: { displayText: "Sayonara Kak" }, type: 1 },]                imageMsg = (                await kxd.prepareMessageMedia(buff, "imageMessage", {                thumbnail: buff,               })            ).imageMessage;          buttonsMessage = {           contentText: `*Sayonara @${num.split('@')[0]}*\n*Semoga Tenang Di Alam Sana*`,          footerText: "_Leave Message By KunzxD_",          contextInfo: {"mentionedJid": [num]},           imageMessage: imageMsg,          buttons: buttons,          headerType: 4,        }        prep = await kxd.prepareMessageFromContent(          mdata.id,          { buttonsMessage },          {}        )        kxd.relayWAMessage(prep)     					}		} catch (e) {			console.log('Error : %s', color(e, 'red'))		}	}